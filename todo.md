# ToDoリスト: Google Workspace コスト削減診断フォーム

## フェーズ 1: プロジェクトセットアップ (担当: 開発者)

- [ ] Next.jsプロジェクトの初期化 (`pnpm create next-app`)
- [ ] Tailwind CSS と shadcn/ui のセットアップ
- [ ] Supabaseプロジェクトの作成と設定
- [ ] Google AI StudioでGemini APIキーの取得
- [ ] Google Apps Scriptプロジェクトの準備 (メール送信用Webhook)
- [ ] Gitリポジトリの初期化と`CLAUDE.md`のコミット

## フェーズ 2: UIコンポーネント実装 (担当: フロントエンド)

- [ ] **レイアウト**: 共通のヘッダー、フッターを含む`Layout`コンポーネントを作成
- [ ] **ランディングページ**: キャッチコピー、メリット説明、CTAボタンを配置した`pages/index.tsx`の骨子を作成
- [ ] **診断フォーム**:
    - [ ] ステップ表示用のプログレスバーコンポーネントを作成
    - [ ] グループウェア選択コンポーネント (`RadioGroup`)
    - [ ] サービス選択コンポーネント (`Select`, `Checkbox`)
    - [ ] ライセンス数入力コンポーネント (`Input`)
    - [ ] 満足度評価コンポーネント (`RadioGroup`)
    - [ ] ユーザー情報入力フォーム (`Input`)
- [ ] **結果ページ**:
    - [ ] コスト比較表示エリアを作成
    - [ ] メリット訴求テキストエリアを作成
    - [ ] 機能比較テーブルのプレースホルダーを作成
    - [ ] CTAボタンとメール送信ボタンを作成
- [ ] **UI/UX**: shadcn/uiコンポーネントを全面的に利用し、`globals.css`でデザインガイドラインに沿ったスタイルを定義

## フェーズ 3: データとロジックの実装 (担当: バックエンド & フロントエンド)

- [ ] **データファイル作成**:
    - [ ] `services-pricing.json`: 調査済みのサービス料金情報をJSON形式で記述
    - [ ] `default-plans.json`: 「プラン不明」時に適用するデフォルトプラン情報をJSON形式で記述
- [ ] **コスト計算ロジック**:
    - [ ] `lib/calculator.ts`を作成
    - [ ] ユーザーの入力とデータファイルを基に、現在の年間コストを計算する関数を実装
    - [ ] Google Workspaceのコストと比較し、削減額を計算する関数を実装
    - [ ] 社内サーバーのコストをユーザー規模に応じて計算するロジックを実装
- [ ] **フォーム状態管理**:
    - [ ] `react-hook-form`を導入し、複数ステップのフォームの状態を管理
    - [ ] バリデーションルールを設定 (メールアドレス形式、必須項目など)
- [ ] **「後で続きから」機能**:
    - [ ] メールアドレス入力時にSupabaseに中間データを保存するAPIルートを作成
    - [ ] Google Apps ScriptのWebhookを呼び出し、再開用URLをメールで送信する処理を実装
    - [ ] 再開用URLからアクセスした際に、Supabaseからデータを復元する処理を実装

## フェーズ 4: API連携とバックエンド処理 (担当: バックエンド)

- [ ] **Supabase連携**:
    - [ ] `lib/supabaseClient.ts`を作成し、Supabaseクライアントを初期化
    - [ ] 診断完了時に、全ての入力データと診断結果をSupabaseデータベースに保存するAPIルートを作成
- [ ] **Gemini API連携**:
    - [ ] `lib/gemini.ts`を作成
    - [ ] ユーザーが選択したサービスとGoogle Workspaceの機能を比較するプロンプトを生成する関数を実装
    - [ ] Gemini APIを呼び出し、機能比較表のコンテンツを動的に取得するAPIルートを作成
- [ ] **メール送信**:
    - [ ] Google Apps ScriptでWebhookを受け取り、診断結果を整形してメール送信する`doPost`関数を実装
    - [ ] 診断結果ページからこのWebhookを呼び出す処理を実装

## フェーズ 5: 最終調整とデプロイ (担当: 全員)

- [ ] **統合テスト**: 全ての機能（フォーム入力→計算→結果表示→メール送信→データ保存）が正常に連携して動作することを確認
- [ ] **レスポンシブテスト**: スマートフォン、タブレット、デスクトップの各画面サイズで表示崩れや操作性の問題がないか確認
- [ ] **パフォーマンスチューニング**: Lighthouseでパフォーマンスを計測し、改善点を修正
- [ ] **Vercelへのデプロイ**:
    - [ ] 環境変数（Supabaseキー、Gemini APIキー、Webhook URLなど）を設定
    - [ ] `main`ブランチにマージし、本番環境へデプロイ
- [ ] **最終確認**: 本番環境で動作確認を行い、問題がなければリリース

