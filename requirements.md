# 要件定義書: Google Workspace コスト削減診断フォーム

## 1. 概要

### 1.1. プロジェクトの目的

本プロジェクトは、中小企業が現在利用している各種SaaS（Software as a Service）をGoogle Workspaceに統合した場合のコスト削減額を診断するWebフォームを開発することを目的とする。これにより、Google Workspace導入に関心を持つ潜在顧客（リード）を獲得し、商談につなげるためのウェブマーケティングツールとして活用する。

### 1.2. ターゲットユーザー

- 中小企業の経営者、役員
- 情報システム部門の担当者
- 総務・経理部門の担当者

### 1.3. コアバリュー

- ユーザーが現在支払っているSaaSコストを可視化する。
- Google Workspaceに統合した場合の具体的な削減額を提示する。
- コスト削減だけでなく、生産性向上やセキュリティ強化といった付加価値も訴求する。

---

## 2. 機能要件

### 2.1. ランディングページ (診断フォームの入り口)

- **キャッチコピー**: 「3分でわかる！あなたの会社のSaaSコスト、Google Workspaceでどれだけ削減できる？」のような、メリットと手軽さが伝わる文言を配置する。
- **メリット説明**: 診断によって得られる情報（コスト削減額、生産性向上のヒントなど）を簡潔に説明する。
- **所要時間の明示**: 「所要時間：約3分」のように、ユーザーが手軽に始められることを示す。
- **信頼性の訴求**: 「Google Workspace 正規代理店」「導入実績〇〇社」といった情報を記載し、信頼性を担保する。

### 2.2. 診断フォーム

- **プログレスバー**: 診断の進捗状況（例: ステップ 1/4）を表示し、ユーザーのモチベーションを維持する。
- **ステップ1: グループウェアの利用状況**
    - 「現在、グループウェアを利用していますか？」という質問を最初に配置する。
    - 選択肢: 「Microsoft 365」「Google Workspace」「サイボウズ Office」「その他」「利用していない」
- **ステップ2: 各種サービスの利用状況**
    - カテゴリ（ビデオ会議、ビジネスチャット、ストレージ、生成AI、メール等）ごとに利用サービスを選択させる。
    - **サービス選択**: 各カテゴリで利用しているサービス名を選択させる。
    - **プラン選択**: サービスごとに契約しているプランを選択させる。料金を直接入力するオプションも設ける。
    - **「プランが分からない」場合**: この選択肢を選ぶと、予め定義された中間プラン（`default-plans.json`参照）の料金で自動計算する。
    - **ライセンス数**: サービスごとに契約しているライセンス数をユーザーに入力させる。「ライセンス数が不明な場合は、おおよその利用人数を入力してください」と補足する。
    - **「利用していない」場合**: 選択肢のラベルを「利用していない（検討中・乗り換え予定）」とし、潜在的なニーズも把握する。
    - **グループウェアとの併用**: グループウェアを利用している場合でも、「上記以外に、個別に契約しているサービスはありますか？」という質問を追加し、Zoomなどを別途契約しているケースに対応する。
- **ステップ3: ユーザー情報入力**
    - リード獲得のため、以下の情報入力を必須とする。
        - 氏名
        - 会社名
        - メールアドレス
- **ステップ4: 現在の満足度**
    - 「現在のIT環境（各種ツール）の満足度を教えてください」という質問を設ける。
    - 選択肢: 「満足」「普通」「不満」

### 2.3. 「後で続きから」機能

- フォーム入力の途中でメールアドレスを入力すると、現在の入力内容が保存され、再開用のURLが記載されたメールが自動送信される。
- ユーザーはメール内のURLをクリックすることで、中断した箇所から入力を再開できる。

### 2.4. 診断結果ページ

- **コスト比較**: 「現在の年間コスト」「Google Workspace導入後の年間コスト」「削減可能な年間コスト」を明確に表示する。
- **注意書き**: 「※本診断結果はあくまで目安であり、実際の削減額を保証するものではありません。」という注意書きを必ず表示する。
- **メリット訴求**: 
    - **コスト削減可能な場合**: 「年間〇〇円のコスト削減が可能です！」と大きく表示し、導入メリットを強調する。
    - **コストが増加する場合**: 「年間〇〇円の費用増となりますが、GeminiによるAI活用やセキュリティ強化など、価格以上のメリットがあります。」と表示し、付加価値を訴求する。
- **機能比較**: Gemini APIを呼び出し、ユーザーが現在利用しているサービスとGoogle Workspaceの機能を比較する簡潔な表を動的に生成・表示する。
- **CTA (Call to Action)**: 「専門家に詳しく相談する（無料）」といったCTAボタンを設置し、クリックすると日程調整ツール（例: Calendly）のURLに遷移させる。
- **結果のメール送信**: 「診断結果をメールで受け取る」ボタンを設置し、クリックすると入力されたメールアドレスに結果ページの要約が送信される。

---

## 3. 非機能要件

### 3.1. デザイン・UI/UX

- **デザインコンセプト**: シンプル、クリーン、モダン。
- **配色**: 白を基調とし、アクセントカラーにブルーを使用する。
- **UIフレームワーク**: Tailwind CSSとshadcn/uiを活用し、高品質なUIを構築する。
- **レスポンシブ対応**: モバイル、タブレット、デスクトップなど、あらゆるデバイスで最適に表示・操作できるよう、レスポンシブデザインを必須とする。

### 3.2. 技術スタック

- **フロントエンド**: Next.js / React
- **バックエンド**: Vercel
- **データベース**: Supabase
- **メール送信**: Google Apps Script (Webhook経由)
- **AI**: Gemini 2.5 Pro API
- **フォーム管理**: React Hook Form

### 3.3. データ管理

- ユーザーが入力したすべての情報（サービス、ライセンス数、満足度、個人情報）および診断結果は、マーケティング分析のためにSupabaseのデータベースに保存する。
- 保存されたデータは、どのサービスの組み合わせが多いか、平均削減額はいくらか等の統計分析に活用する。

### 3.4. パフォーマンス

- ページの読み込み、フォームの入力、計算処理などがストレスなく行えるよう、パフォーマンスを最適化する。
- Lighthouseスコアで高得点を目指す。




---

## 4. データ仕様

### 4.1. サービス料金データベース (`services-pricing.json`)

各SaaSサービスのプランと料金情報を格納したJSONファイル。診断フォームの計算ロジックで参照する。

**構造**:
```json
[
  {
    "categoryName": "カテゴリ名",
    "services": [
      {
        "serviceName": "サービス名",
        "plans": [
          { "planName": "プラン名", "price": 年額, "unit": "per_user_per_year" }
        ]
      }
    ]
  }
]
```

### 4.2. デフォルトプラン設定 (`default-plans.json`)

ユーザーが「プランが分からない」を選択した場合に適用するデフォルトプランを定義したJSONファイル。

**構造**:
```json
{
  "サービス名": "デフォルトプラン名"
}
```

**選定基準**: 各サービスの中間プラン（価格と機能のバランスが取れたプラン）を選定している。

---

## 5. 計算ロジック

### 5.1. 現在のコスト計算

ユーザーが入力した各サービスのライセンス数とプラン情報を基に、年間コストを算出する。

**計算式**:
```
現在の年間コスト = Σ (サービスごとの年額 × ライセンス数)
```

### 5.2. Google Workspaceのコスト計算

全ユーザー数（最大ライセンス数）に対して、Google Workspace Business Standardの年額を掛ける。

**計算式**:
```
Google Workspace年間コスト = 19,200円 × 全ユーザー数
```

### 5.3. 削減額の計算

現在のコストとGoogle Workspaceのコストの差額を算出する。

**計算式**:
```
削減額 = 現在の年間コスト - Google Workspace年間コスト
```

- **削減額 > 0**: コスト削減が可能
- **削減額 ≤ 0**: コストが増加するが、付加価値を訴求

### 5.4. 社内サーバーの特殊処理

社内サーバーを選択した場合、ユーザー規模に応じた一人当たりコストを`services-pricing.json`から取得し、ライセンス数を掛けて年間コストを算出する。

---

## 6. Gemini APIによる機能比較生成

### 6.1. プロンプト設計

ユーザーが選択したサービスとGoogle Workspaceの機能を比較する表を生成するため、以下のような構造のプロンプトをGemini APIに送信する。

**プロンプト例**:
```
以下のサービスとGoogle Workspace Business Standardの機能を比較する表を、簡潔に（3〜5行程度）生成してください。

現在利用しているサービス:
- ビデオ会議: Zoom ビジネスプラン
- ビジネスチャット: Slack プロプラン
- ストレージ: Dropbox Standard

Google Workspace Business Standardの機能:
- Google Meet (ビデオ会議)
- Google Chat (ビジネスチャット)
- Google Drive (ストレージ)
- Gmail, カレンダー, Gemini (生成AI)

比較の観点: 機能の充実度、統合性、コストパフォーマンス
```

### 6.2. レスポンス処理

Gemini APIから返却されたテキストを、診断結果ページの「機能比較」セクションに表示する。

---

## 7. メール送信仕様

### 7.1. 「後で続きから」メール

**送信タイミング**: フォーム入力中にメールアドレスを入力し、「保存して後で続ける」ボタンをクリックした時。

**メール内容**:
- 件名: 「【Google Workspace診断】入力内容を保存しました」
- 本文: 「診断を再開するには、以下のURLをクリックしてください。[再開用URL]」

### 7.2. 診断結果メール

**送信タイミング**: 診断完了後、「診断結果をメールで受け取る」ボタンをクリックした時。

**メール内容**:
- 件名: 「【Google Workspace診断】あなたの診断結果」
- 本文:
    - 現在の年間コスト
    - Google Workspace導入後の年間コスト
    - 削減可能な年間コスト
    - 診断結果ページへのリンク
    - CTAボタン（日程調整URLへのリンク）

---

## 8. 日程調整ツール連携

診断結果ページのCTAボタンをクリックすると、外部の日程調整ツール（例: Calendly, Google Calendar予約ページ）に遷移する。

**設定項目**:
- 日程調整ツールのURL（環境変数で管理）
- UTMパラメータを付与し、診断フォーム経由のアクセスであることをトラッキング

---

## 9. セキュリティとプライバシー

### 9.1. 個人情報の取り扱い

ユーザーから取得した氏名、会社名、メールアドレスは、Supabaseに暗号化して保存する。利用目的は以下の通り。

- 診断結果のメール送信
- マーケティング分析
- 営業活動（商談のフォローアップ）

### 9.2. データ保護

- **HTTPS通信**: すべての通信はHTTPSで暗号化する。
- **環境変数管理**: APIキーやデータベース接続情報は、Vercelの環境変数として管理し、ソースコードに含めない。
- **CORS設定**: 不正なドメインからのAPIアクセスを防ぐため、適切なCORS設定を行う。

---

## 10. 今後の拡張性

### 10.1. 追加サービスの対応

新しいSaaSサービスが登場した場合、`services-pricing.json`に追加することで、簡単に診断対象を拡張できる。

### 10.2. 多言語対応

将来的に英語版の診断フォームを提供する場合、i18n（国際化）ライブラリを導入し、言語切り替えに対応する。

### 10.3. A/Bテスト

ランディングページのキャッチコピーやCTAボタンの文言を変更し、コンバージョン率を最適化するA/Bテストを実施する。

---

## 11. 成功指標 (KPI)

本プロジェクトの成功を測定するための指標を以下に定義する。

- **診断完了率**: フォームを開始したユーザーのうち、最後まで完了した割合。目標: 60%以上。
- **リード獲得数**: 1ヶ月あたりのメールアドレス取得数。目標: 100件以上。
- **商談化率**: リード獲得後、実際に日程調整ツールから予約に至った割合。目標: 10%以上。
- **平均削減額**: 診断結果で算出された平均的なコスト削減額。目標: 年間5万円以上。

---

## 12. プロジェクトスケジュール

| フェーズ | 期間 | 主な成果物 |
| :--- | :--- | :--- |
| 要件定義 | 1週間 | 本ドキュメント、CLAUDE.md |
| 設計・開発 | 2〜3週間 | フロントエンド、バックエンド、API連携 |
| テスト | 1週間 | 統合テスト、レスポンシブテスト |
| デプロイ・運用開始 | 数日 | Vercelへのデプロイ、本番環境での動作確認 |

---

**文書作成者**: Manus AI  
**作成日**: 2025年10月18日  
**バージョン**: 1.0

